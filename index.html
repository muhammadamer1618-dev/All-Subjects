<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>دخول المشرف - مدارس الفلاح الأهلية</title>
<link href="https://fonts.googleapis.com/css2?family=Calibri:wght@400;700&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
<style>
body{
  font-family: Calibri;
  background: linear-gradient(135deg,#1976d2,#42a5f5);
  height:100vh;margin:0;
  display:flex;align-items:center;justify-content:center;
}
.card{
  background:#fff;color:#1565c0;
  padding:30px;border-radius:15px;
  box-shadow:0 0 20px rgba(0,0,0,0.3);
  width:90%;max-width:400px;text-align:center;
}
h1{margin:0;font-size:28px;font-weight:bold;}
h2{margin-top:5px;font-size:20px;color:#d32f2f;}
input,button{
  width:100%;padding:12px;margin-top:15px;
  border-radius:8px;border:1px solid #999;
  font-size:18px;
}
button{
  background:#1976d2;color:#fff;border:none;
  cursor:pointer;font-weight:bold;
}
button:hover{opacity:0.9;}
.link-btn{background:#d32f2f;}
a{color:#1976d2;cursor:pointer;display:block;margin-top:10px;}
</style>
</head>
<body>

<div class="card">
  <h1>مدارس الفلاح الأهلية</h1>
  <h2>تسجيل دخول المشرف</h2>

  <input id="email" type="email" placeholder="أدخل الإيميل">
  <input id="pwd" type="password" placeholder="أدخل كلمة المرور">
  <button onclick="login()">دخول</button>
  <a onclick="forgotPassword()">نسيت كلمة المرور؟</a>
</div>

<script>
var firebaseConfig = {
  apiKey: "AIzaSyC4-cGVb2pHwo6LYiD-UoWtmEEZKQxj4_M",
  authDomain: "all-subjects-14322.firebaseapp.com",
  projectId: "all-subjects-14322",
  storageBucket: "all-subjects-14322.firebasestorage.app",
  messagingSenderId: "813955287168",
  appId: "1:813955287168:web:07efa7dde95b117b9bbe65"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

async function login(){
  const email = document.getElementById('email').value.trim();
  const pwd = document.getElementById('pwd').value.trim();
  if(!email || !pwd){ alert("أدخل البريد الإلكتروني وكلمة المرور"); return; }
  try{
    await auth.signInWithEmailAndPassword(email, pwd);
    if(auth.currentUser.email === "muhammadamer1618@gmail.com"){
      location = "admin.html";
    }else{
      alert("ليس لديك صلاحية الدخول");
      auth.signOut();
    }
  }catch(e){
    alert("خطأ في تسجيل الدخول: " + e.message);
  }
}

function forgotPassword(){
  const email = document.getElementById('email').value.trim();
  if(!email){ alert("أدخل البريد الإلكتروني أولاً"); return; }
  auth.sendPasswordResetEmail(email)
    .then(()=> alert("تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك"))
    .catch(e=> alert("خطأ أثناء الإرسال: " + e.message));
}
</script>

</body>
</html>
