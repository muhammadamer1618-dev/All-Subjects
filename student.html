
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>شهادة الطالب - مدارس الفلاح الأهلية</title>
  <link href="https://fonts.googleapis.com/css2?family=Calibri:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body{font-family:Calibri;background:#f6f6f6;margin:0;padding:25px}
    table{width:100%;border-collapse:collapse;margin-top:20px;font-size:22px}
    td{border:1px solid #000;padding:10px;text-align:center}
    .label{color:#d32f2f;font-weight:bold}
    .value{color:#1565c0;font-weight:bold}
    .title{text-align:center;font-size:26px;color:#d32f2f;font-weight:bold;padding:10px;border:1px solid #000;margin-top:10px}
    .btn{width:100%;padding:15px;border:none;border-radius:8px;font-size:18px;margin-bottom:10px;cursor:pointer}
    .view{background:#1976d2;color:white}
    .print{background:#388e3c;color:white}
    .back{background:#777;color:white}
    @media print{.btn,#code{display:none}}
  </style>
</head>
<body>

<input id="code" placeholder="ادخل كود الطالب" class="btn" style="border:1px solid #999">
<button onclick="loadData()" class="btn view">عرض</button>
<button onclick="window.print()" class="btn print">طباعة</button>
<button onclick="location='index.html'" class="btn back">الصفحة الرئيسية</button>

<div id="cert" style="display:none">

<h1 style="text-align:center;color:#1565c0;font-size:34px;margin:0;font-weight:bold;">
    مدارس الفلاح الأهلية
</h1>

<h2 style="text-align:center;color:#d32f2f;font-size:26px;margin-top:5px;font-weight:bold;">
    قسم المواد المختلفة
</h2>

<div class="title">شهادة درجات المادة</div>

<table>
<tr><td class="label">اسم الطالب</td><td class="value" id="student_name"></td></tr>
<tr><td class="label">المادة</td><td class="value" id="subject"></td></tr>
<tr><td class="label">الصف</td><td class="value" id="grade"></td></tr>
<tr><td class="label">الشعبة</td><td class="value" id="section"></td></tr>
<tr><td class="label">اسم المعلم</td><td class="value" id="teacher"></td></tr>
<tr><td class="label">نوع الاختبار</td><td class="value" id="examType"></td></tr>
<tr><td class="label">الدرجة النهائية</td><td class="value" id="fullMark"></td></tr>
<tr><td class="label">درجة الطالب</td><td class="value" id="mark"></td></tr>
<tr><td class="label">التقدير</td><td class="value" id="rating"></td></tr>
</table>

</div>

<script>
function calcRating(mark, full){
  let m = Number(mark);
  let f = Number(full);
  if(!m || !f) return "—";
  let p = (m/f)*100;

  if(p>=90) return "ممتاز";
  if(p>=80) return "جيد جدًا";
  if(p>=70) return "جيد";
  if(p>=60) return "مقبول";
  return "ضعيف";
}

function loadData(){
  let all = localStorage.getItem("students");
  all = all ? JSON.parse(all) : {};

  let c = document.getElementById('code').value.trim();
  if(!all[c]){alert("الكود غير موجود");return;}

  let st = all[c];
  document.getElementById('cert').style.display="block";

  document.getElementById('student_name').innerText = st.name || "";
  document.getElementById('grade').innerText = st.grade || "";
  document.getElementById('examType').innerText = st.examType ? ("اختبار " + st.examType) : "";
  document.getElementById('fullMark').innerText = st.fullMark;
  document.getElementById('subject').innerText = st.subject || "غير محدد"; // المادة
  document.getElementById('mark').innerText = st.mark;
  document.getElementById('teacher').innerText = st.teacher || "";

  document.getElementById('rating').innerText = calcRating(st.mark, st.fullMark);
}
</script>

</body>
</html>
